<!-- Developed by Taipei Urban Intelligence Center 2023 -->

<script setup>
import { computed, defineProps, ref } from "vue";
import { useMapStore } from "../../store/mapStore";
import { useDialogStore } from "../../store/dialogStore";
import { districtCoordinates } from "../../assets/configs/apexcharts/districtCoordinates";

const props = defineProps([
	"chart_config",
	"activeChart",
	"series",
	"map_config",
	"map_filter",
]);
const mapStore = useMapStore();
const dialogStore = useDialogStore();

const targetDistrict = ref(null);
const districtColor = ref(props.chart_config.color[0]);
const mousePosition = ref({ x: null, y: null });
const selectedIndex = ref(null);
const districts = [
	"大園區",
	"觀音區",
	"龜山區",
	"大溪區",
	"龍潭區",
	"楊梅區",
	"桃園區",
	"新屋區",
	"中壢區",
	"八德區",
	"平鎮區",
	"復興區",
	"蘆竹區",
];

// Parse District Data (to support 2D or 3D data)
const districtData = computed(() => {
	let output = {};
	let highest = 0;
	let sum = 0;
	if (props.series.length === 1) {
		props.series[0].data.forEach((item) => {
			output[item.x] = item.y;
			if (item.y > highest) {
				highest = item.y;
			}
			sum += item.y;
		});
	} else {
		props.series.forEach((serie) => {
			for (let i = 0; i < 13; i++) {
				if (!output[props.chart_config.categories[i]]) {
					output[props.chart_config.categories[i]] = 0;
				}
				output[props.chart_config.categories[i]] += +serie.data[i];
			}
		});
		highest = Object.values(output).sort(function (a, b) {
			return b - a;
		})[0];
		sum = Object.values(output).reduce(
			(partialSum, a) => partialSum + a,
			0
		);
	}

	output.highest = highest;
	output.sum = sum;
	return output;
});
const tooltipPosition = computed(() => {
	return {
		left: `${mousePosition.value.x - 10}px`,
		top: `${mousePosition.value.y - 54}px`,
	};
});

function toggleActive(e) {
	targetDistrict.value = e.target.dataset.name;
}
function toggleActiveToNull() {
	targetDistrict.value = null;
}
function updateMouseLocation(e) {
	mousePosition.value.x = e.pageX;
	mousePosition.value.y = e.pageY;
}

function handleDataSelection(index) {
	if (!props.map_filter) {
		return;
	}
	if (index !== selectedIndex.value) {
		if (mapStore.map && !dialogStore.dialogs.moreInfo) {
			mapStore.flyToLocation(districtCoordinates[index]);
		}
		// Supports filtering by xAxis
		if (props.map_filter.mode === "byParam") {
			mapStore.filterByParam(
				props.map_filter,
				props.map_config,
				districts[index]
			);
		}
		// Supports filtering by xAxis
		else if (props.map_filter.mode === "byLayer") {
			mapStore.filterByLayer(props.map_config, districts[index]);
		}
		selectedIndex.value = index;
	} else {
		if (mapStore.map && !dialogStore.dialogs.moreInfo) {
			mapStore.flyToLocation([121.24179, 24.95816]);
		}
		if (props.map_filter.mode === "byParam") {
			mapStore.clearByParamFilter(props.map_config);
		} else if (props.map_filter.mode === "byLayer") {
			mapStore.clearByLayerFilter(props.map_config);
		}
		selectedIndex.value = null;
	}
}
</script>

<template>
	<div v-if="activeChart === 'DistrictChart'" class="districtchart">
		<div class="districtchart-title">
			<h5>總合</h5>
			<h6>{{ districtData.sum }} {{ chart_config.unit }}</h6>
			<div class="districtchart-title-legend">
				<p>多</p>
				<div
					:style="{ backgroundColor: props.chart_config.color[0] }"
				></div>
				<p>少</p>
			</div>
		</div>
		<div class="districtchart-chart">
			<svg viewBox="00 -230 1103.00 1570.00" xmlns="http://www.w3.org/2000/svg">
				<g>
					<path
						data-name="大園區"
						:class="{
							'active-district':
								targetDistrict === '大園區' ||
								selectedIndex === 0,
							'initial-animation-1': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(0)"
						:fill-opacity="
							districtData['大園區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 542.73 263.64
  C 541.71 265.76 540.73 268.24 538.20 268.90
  A 1.71 1.70 -38.5 0 1 537.03 268.77
  Q 532.33 266.43 531.58 260.93
  Q 530.10 250.05 523.15 239.45
  Q 517.47 230.79 508.29 230.35
  Q 505.84 230.24 502.68 231.08
  C 498.42 232.21 495.73 235.32 493.39 238.86
  C 490.99 242.50 486.12 242.69 482.39 241.55
  C 476.73 239.82 476.10 232.50 468.90 234.12
  C 465.44 234.90 457.26 236.35 454.59 233.27
  C 450.99 229.13 447.01 227.69 441.24 227.96
  C 436.63 228.18 431.84 229.29 427.33 228.22
  C 421.66 226.89 414.96 225.21 411.05 220.72
  C 405.43 214.26 414.80 207.97 418.37 203.73
  C 421.87 199.58 426.37 189.71 422.71 184.69
  Q 420.90 182.20 418.72 179.91
  C 416.84 177.95 414.65 176.11 413.14 173.88
  Q 409.27 168.15 409.19 161.10
  Q 409.06 149.46 408.90 137.99
  C 408.84 133.22 406.64 128.09 402.25 125.64
  C 398.94 123.80 395.32 120.92 395.04 116.76
  Q 394.43 107.62 395.10 99.12
  C 395.49 94.21 398.74 92.73 403.35 91.37
  Q 416.76 87.39 429.25 83.30
  Q 434.70 81.52 438.05 79.58
  Q 449.68 72.86 460.51 66.78
  C 464.32 64.64 468.61 62.44 472.69 60.95
  Q 478.98 58.66 481.79 56.79
  Q 499.09 45.29 519.01 40.33
  C 527.46 38.22 535.13 36.47 543.34 32.34
  Q 555.66 26.15 565.47 20.68
  Q 572.06 17.01 577.40 15.50
  Q 580.15 14.72 583.98 14.60
  Q 587.30 14.49 591.26 12.86
  C 596.55 10.66 601.35 13.04 602.00 18.90
  Q 603.50 32.36 605.90 40.33
  C 607.58 45.92 607.86 51.82 609.05 57.50
  C 609.81 61.14 611.89 63.65 615.07 65.71
  C 620.29 69.11 624.60 73.30 626.63 79.19
  C 627.94 82.95 628.41 86.91 630.46 90.39
  Q 632.99 94.68 636.39 97.43
  C 640.40 100.66 645.53 105.35 646.01 110.60
  C 646.71 118.37 646.27 125.30 642.47 132.30
  Q 641.25 134.56 638.81 136.12
  C 634.39 138.94 630.12 140.82 625.10 141.63
  Q 619.73 142.49 617.44 143.56
  Q 608.89 147.52 602.18 151.83
  Q 598.32 154.32 595.27 158.76
  Q 588.15 169.13 583.80 181.00
  Q 581.13 188.26 574.63 190.91
  C 569.02 193.19 566.78 201.02 567.20 206.40
  Q 567.54 210.82 568.29 215.25
  Q 569.94 224.99 573.58 230.16
  Q 577.72 236.03 581.88 241.79
  C 584.93 246.00 591.12 248.45 593.71 252.77
  C 596.04 256.66 596.11 262.90 592.38 266.22
  C 586.79 271.17 576.83 277.71 571.22 268.27
  Q 567.53 262.05 564.42 256.52
  C 560.81 250.11 552.85 250.11 548.22 255.47
  Q 544.73 259.51 542.73 263.64
  Z"
/>
					<path
						data-name="觀音區"
						:class="{
							'active-district':
								targetDistrict === '觀音區' ||
								selectedIndex === 1,
							'initial-animation-2': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(1)"
						:fill-opacity="
							districtData['觀音區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 401.42 173.49
  C 401.67 176.44 402.03 179.07 403.83 180.66
  C 405.59 182.22 407.49 183.70 408.63 185.80
  Q 412.15 192.26 410.16 198.96
  C 408.40 204.92 405.73 210.10 401.68 214.83
  C 397.20 220.08 392.41 225.49 390.22 231.80
  C 388.33 237.28 388.67 243.66 388.78 249.55
  C 388.90 256.34 389.58 263.92 394.36 268.82
  C 402.47 277.12 410.45 286.74 419.20 293.98
  C 423.53 297.57 423.85 305.80 422.63 310.30
  C 421.69 313.79 417.98 317.47 414.79 319.41
  Q 411.74 321.25 410.17 323.88
  C 404.44 333.46 405.23 345.03 398.62 354.24
  Q 394.87 359.46 391.22 363.98
  Q 386.93 369.30 381.07 365.55
  C 373.42 360.66 368.59 355.35 363.55 347.38
  Q 359.86 341.54 356.37 336.59
  C 355.09 334.77 354.84 332.19 355.21 330.05
  Q 356.47 322.70 355.95 315.26
  Q 354.94 300.78 340.89 297.35
  Q 332.44 295.29 323.54 301.06
  C 320.97 302.73 318.68 304.91 315.44 305.09
  C 306.90 305.55 301.22 298.62 296.72 292.21
  C 293.24 287.24 289.04 284.29 282.99 284.09
  C 273.05 283.74 262.38 277.60 254.14 272.33
  C 249.12 269.11 243.53 267.80 237.61 267.21
  Q 228.30 266.27 220.54 263.65
  Q 216.33 262.23 212.90 258.57
  Q 206.62 251.89 200.85 246.53
  C 197.61 243.52 193.51 243.24 189.74 241.14
  Q 180.50 235.99 167.95 234.90
  C 163.33 234.50 158.16 230.62 154.62 227.84
  Q 153.07 226.62 154.45 225.20
  C 158.02 221.53 161.82 218.31 165.21 214.46
  C 169.28 209.83 174.05 206.46 179.38 203.30
  C 185.39 199.72 190.30 194.07 195.14 189.11
  Q 197.48 186.71 200.55 184.90
  Q 207.20 180.98 219.49 175.56
  C 222.93 174.04 226.42 172.25 229.51 170.08
  C 233.34 167.39 237.02 164.41 241.33 162.48
  Q 248.51 159.26 254.97 155.38
  C 259.98 152.37 265.65 151.17 270.83 148.73
  C 275.07 146.74 277.78 143.04 281.83 141.08
  C 286.30 138.92 291.41 138.05 295.03 134.58
  Q 297.65 132.06 300.33 129.45
  Q 305.78 124.15 312.97 121.03
  Q 323.49 116.46 332.46 113.07
  C 334.87 112.15 337.02 110.91 338.98 109.24
  C 341.60 107.02 345.25 103.48 348.79 103.29
  Q 352.35 103.10 356.55 103.64
  C 361.57 104.29 366.79 103.24 371.26 100.62
  C 375.44 98.18 381.02 95.74 385.92 96.06
  Q 388.49 96.23 387.58 98.64
  C 384.33 107.21 385.92 118.40 388.71 127.80
  C 391.13 135.96 401.10 138.22 400.87 147.74
  Q 400.50 162.66 401.42 173.49
  Z"
/>
					<path
						data-name="龜山區"
						:class="{
							'active-district':
								targetDistrict === '龜山區' ||
								selectedIndex === 2,
							'initial-animation-3': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(2)"
						:fill-opacity="
							districtData['龜山區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 923.32 167.63
  C 925.02 168.37 928.22 168.01 930.06 167.99
  C 935.44 167.93 940.28 173.08 939.27 178.53
  C 937.36 188.89 936.14 200.28 945.23 207.94
  Q 948.41 210.62 951.07 213.30
  C 957.05 219.32 955.45 233.82 953.80 241.82
  C 953.60 242.78 952.82 243.97 952.12 244.65
  Q 947.89 248.74 944.05 254.54
  Q 941.76 258.01 941.44 261.89
  C 941.03 266.77 942.17 271.60 945.29 275.51
  C 949.94 281.32 950.67 289.08 946.94 295.49
  Q 941.38 305.03 929.94 307.26
  Q 922.05 308.79 916.89 316.00
  Q 911.48 323.54 906.42 330.57
  Q 904.71 332.95 901.95 334.33
  Q 894.17 338.22 886.72 340.70
  C 877.61 343.74 866.56 344.45 856.49 344.96
  Q 851.84 345.19 847.39 345.69
  Q 843.13 346.17 838.52 346.02
  C 835.69 345.93 832.94 346.87 830.10 346.91
  Q 822.47 347.03 814.98 346.99
  Q 811.12 346.97 807.69 345.75
  Q 801.15 343.42 795.10 341.16
  C 792.42 340.16 790.88 337.66 789.54 335.29
  Q 785.13 327.49 788.03 319.42
  Q 792.42 307.22 795.79 296.10
  Q 796.90 292.46 797.36 288.73
  C 798.91 276.25 799.15 262.71 794.37 250.82
  Q 791.78 244.38 785.89 237.72
  Q 778.91 229.83 772.09 224.57
  Q 769.06 222.22 766.51 219.27
  C 763.30 215.55 759.91 212.14 756.94 208.22
  C 754.34 204.79 749.54 200.45 744.93 200.89
  C 737.98 201.57 732.08 201.61 727.16 195.79
  C 723.16 191.05 724.76 182.05 731.99 182.00
  C 739.09 181.95 746.46 180.85 753.79 180.95
  Q 757.25 180.99 760.62 179.67
  C 765.11 177.90 769.40 171.66 772.09 167.65
  C 774.57 163.97 776.93 160.48 780.38 157.59
  C 784.57 154.09 787.64 149.74 791.97 146.40
  C 797.65 142.03 803.22 136.80 809.27 132.71
  C 812.70 130.39 813.65 126.91 816.19 124.11
  Q 821.39 118.39 828.72 118.24
  Q 830.53 118.20 832.82 119.24
  Q 834.42 119.97 835.52 121.27
  C 846.00 133.73 861.07 144.19 877.73 144.04
  C 880.13 144.02 882.47 144.95 884.76 144.61
  C 894.90 143.09 904.20 145.80 914.00 148.53
  Q 916.57 149.25 917.39 151.69
  Q 919.73 158.70 921.89 166.01
  A 2.56 2.53 -86.8 0 0 923.32 167.63
  Z"
/>
					<path
						data-name="桃園區"
						:class="{
							'active-district':
								targetDistrict === '桃園區' ||
								selectedIndex === 6,
							'initial-animation-4': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(6)"
						:fill-opacity="
							districtData['桃園區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 687.83 328.02
  C 687.20 324.25 682.04 324.59 679.44 325.89
  Q 674.32 328.44 672.30 330.01
  C 669.52 332.15 666.92 334.20 663.66 335.37
  Q 659.78 336.76 655.80 338.23
  C 650.54 340.17 645.94 337.11 645.78 331.47
  Q 645.63 326.11 649.91 322.43
  Q 653.91 319.00 656.89 317.08
  C 668.15 309.81 677.06 303.62 685.97 294.50
  C 689.92 290.46 690.36 286.12 689.12 280.40
  Q 687.66 273.66 685.52 266.97
  C 683.13 259.53 681.92 253.18 681.80 245.47
  C 681.75 242.64 681.34 236.70 684.95 236.16
  C 691.06 235.23 696.53 236.62 702.60 237.38
  Q 706.04 237.82 709.33 237.22
  Q 713.71 236.42 717.77 236.09
  A 6.73 6.72 -66.8 0 0 721.44 234.62
  Q 725.80 231.11 729.71 227.87
  Q 732.69 225.39 736.09 218.94
  C 737.73 215.83 740.74 212.97 744.59 214.10
  C 748.26 215.17 749.98 223.44 750.15 226.44
  C 750.41 230.93 756.65 232.07 760.08 231.99
  C 764.56 231.88 769.32 232.72 771.61 237.10
  Q 774.15 241.93 777.88 246.03
  C 784.55 253.33 788.57 259.86 788.76 270.54
  Q 789.06 286.62 786.13 302.88
  C 785.48 306.49 784.04 309.89 782.03 313.03
  C 778.88 317.93 775.33 324.38 774.23 330.21
  C 773.06 336.44 770.87 346.14 763.53 348.01
  Q 757.00 349.67 748.45 351.19
  C 744.75 351.85 740.18 352.64 736.85 350.84
  C 734.55 349.60 732.76 347.34 731.01 345.47
  C 728.68 342.98 725.06 341.55 722.72 344.92
  Q 718.17 351.49 715.91 356.34
  Q 714.73 358.87 713.92 364.54
  Q 713.33 368.63 712.61 374.20
  Q 712.33 376.44 710.41 375.55
  A 1.54 1.52 85.2 0 1 709.78 375.01
  Q 705.47 368.59 700.36 362.69
  C 695.97 357.62 692.97 348.70 690.41 341.56
  C 688.81 337.08 688.60 332.59 687.83 328.02
  Z"
/>
					<path
						data-name="新屋區"
						:class="{
							'active-district':
								targetDistrict === '新屋區' ||
								selectedIndex === 7,
							'initial-animation-5': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(7)"
						:fill-opacity="
							districtData['新屋區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 194.68 441.44
  C 189.75 447.74 180.61 445.42 174.38 442.97
  C 167.18 440.14 159.91 435.64 151.63 435.18
  Q 143.23 434.71 136.05 435.22
  Q 130.71 435.59 127.34 435.48
  Q 123.02 435.33 118.66 434.77
  C 110.53 433.72 103.75 427.71 98.24 421.93
  C 97.41 421.07 96.21 420.13 95.00 419.96
  C 89.53 419.22 84.73 419.77 80.21 423.54
  Q 71.59 430.72 57.81 436.33
  Q 55.67 437.20 53.49 436.18
  C 47.11 433.22 47.76 426.87 47.87 420.90
  C 48.02 413.02 51.76 406.32 56.85 399.34
  Q 60.94 393.73 68.22 380.84
  Q 72.21 373.76 76.67 367.43
  Q 81.10 361.16 85.63 354.31
  C 89.55 348.38 94.05 342.77 98.07 336.89
  C 100.48 333.35 102.29 329.37 104.45 325.53
  C 105.14 324.29 104.97 321.23 104.76 319.57
  Q 103.36 308.62 104.05 298.93
  Q 105.11 283.88 110.56 268.68
  Q 112.38 263.59 116.56 256.88
  Q 119.77 251.71 126.51 243.54
  Q 129.69 239.67 132.62 238.49
  Q 138.94 235.94 143.76 237.48
  C 150.62 239.67 157.13 242.30 163.52 246.52
  Q 168.82 250.02 175.88 253.40
  Q 178.94 254.86 182.40 255.29
  Q 187.09 255.86 191.79 256.46
  Q 198.20 257.28 201.95 261.43
  Q 206.12 266.06 209.62 270.50
  C 212.38 274.02 216.08 275.79 220.04 277.63
  Q 224.14 279.55 228.66 278.59
  C 236.84 276.85 244.29 275.74 251.93 280.49
  C 256.24 283.18 257.78 288.30 261.67 291.56
  Q 265.01 294.36 268.24 295.53
  C 270.34 296.29 273.29 295.85 275.45 295.42
  Q 284.92 293.53 291.81 300.76
  Q 298.09 307.35 304.17 314.38
  Q 307.32 318.02 311.83 320.05
  C 315.12 321.54 319.03 319.88 321.01 317.27
  C 325.18 311.78 328.47 306.48 336.60 310.03
  C 338.22 310.74 339.56 311.72 340.19 313.46
  Q 342.56 320.09 342.58 325.32
  Q 342.61 334.00 343.18 342.26
  C 343.54 347.42 345.57 352.26 349.62 355.55
  Q 352.79 358.13 355.28 362.57
  Q 358.64 368.55 363.82 371.44
  C 368.41 374.01 370.31 378.97 375.12 381.39
  Q 379.05 383.37 383.41 385.43
  Q 385.67 386.50 386.00 388.41
  Q 386.09 388.91 385.80 389.33
  Q 384.43 391.24 382.36 392.37
  C 375.62 396.05 368.57 398.72 360.93 399.62
  Q 352.77 400.59 346.61 402.67
  C 333.52 407.11 319.39 405.82 308.04 397.21
  C 303.58 393.82 298.22 391.07 292.72 389.83
  C 290.06 389.23 287.45 388.25 284.72 388.03
  Q 270.13 386.88 256.84 392.61
  Q 253.74 393.95 251.27 396.22
  C 248.05 399.16 244.38 401.98 240.19 403.13
  Q 232.05 405.37 224.52 411.35
  Q 208.00 424.47 194.68 441.44
  Z"
/>
					<path
						data-name="中壢區"
						:class="{
							'active-district':
								targetDistrict === '中壢區' ||
								selectedIndex === 8,
							'initial-animation-6': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(8)"
						:fill-opacity="
							districtData['中壢區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 524.59 281.11
  C 526.51 283.98 531.67 283.37 534.25 282.27
  Q 540.13 279.77 545.26 278.34
  C 549.40 277.18 552.88 272.46 556.03 269.54
  C 560.22 265.65 563.24 277.34 563.53 279.27
  Q 564.16 283.35 565.30 286.90
  Q 566.15 289.54 568.79 289.89
  Q 578.27 291.14 586.88 287.15
  C 589.99 285.71 592.13 283.32 594.07 280.57
  C 598.41 274.45 603.35 275.70 606.10 282.12
  Q 609.86 290.93 614.50 298.10
  C 617.01 301.97 619.70 305.34 621.67 309.62
  Q 624.29 315.32 627.37 321.13
  C 630.55 327.13 632.65 334.03 636.31 340.00
  Q 643.41 351.61 650.26 366.53
  Q 651.80 369.89 653.82 372.35
  C 658.28 377.82 660.08 384.63 661.50 391.63
  C 663.29 400.41 657.39 410.61 652.56 417.78
  Q 642.69 432.41 637.23 450.00
  C 635.67 455.03 632.83 459.14 627.81 461.07
  Q 619.99 464.07 612.85 467.06
  C 608.03 469.07 600.27 470.77 595.03 469.57
  Q 589.38 468.28 583.46 465.37
  Q 580.37 463.85 577.64 460.29
  Q 565.77 444.84 561.93 427.78
  C 560.27 420.36 554.10 409.36 546.40 405.45
  Q 541.81 403.12 537.79 400.46
  C 531.26 396.14 524.89 394.11 517.19 393.20
  C 510.72 392.44 505.07 394.41 499.29 396.63
  C 497.58 397.29 495.80 396.80 494.87 395.12
  Q 492.27 390.45 492.07 386.56
  Q 491.80 381.13 492.06 375.49
  C 492.34 369.48 490.27 365.49 483.91 365.09
  Q 477.14 364.67 469.40 365.97
  C 463.71 366.93 458.84 369.80 453.36 371.37
  Q 448.09 372.88 443.56 374.76
  C 437.98 377.08 432.74 383.37 429.65 388.46
  C 426.58 393.53 421.09 394.70 415.63 393.85
  Q 408.71 392.78 404.08 390.54
  C 398.33 387.77 393.69 380.95 394.99 374.14
  C 395.78 370.03 401.75 366.25 405.02 363.99
  C 407.87 362.01 410.32 359.18 412.21 356.24
  Q 416.00 350.33 420.52 345.89
  C 422.23 344.20 422.68 341.52 422.34 339.27
  C 421.69 334.99 420.60 330.79 421.01 326.46
  C 421.62 319.91 430.53 322.02 430.05 314.79
  Q 429.64 308.73 428.17 303.94
  Q 426.12 297.27 424.38 290.22
  C 423.56 286.89 421.98 283.87 419.66 281.33
  C 416.96 278.37 414.19 275.63 411.81 272.37
  Q 404.48 262.34 401.97 257.06
  Q 397.52 247.72 401.87 238.28
  Q 403.43 234.90 407.48 235.13
  Q 412.96 235.44 417.93 237.10
  C 424.99 239.44 432.65 240.29 439.88 241.86
  C 444.76 242.92 449.52 245.80 454.50 245.94
  Q 459.77 246.09 464.81 246.97
  Q 468.15 247.55 469.74 250.72
  C 471.30 253.82 476.15 259.32 480.19 259.26
  C 485.42 259.17 490.39 259.12 493.83 254.51
  Q 498.18 248.68 503.77 245.08
  Q 508.00 242.36 512.12 245.73
  C 516.48 249.30 521.19 253.73 519.45 259.92
  C 518.55 263.11 519.70 265.60 519.95 268.70
  Q 520.09 270.53 520.67 272.23
  C 521.68 275.21 522.79 278.44 524.59 281.11
  Z"
/>
					<path
						data-name="八德區"
						:class="{
							'active-district':
								targetDistrict === '八德區' ||
								selectedIndex === 9,
							'initial-animation-7': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(9)"
						:fill-opacity="
							districtData['八德區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 716.95 386.52
  C 722.20 383.76 726.72 380.89 725.48 374.01
  C 724.52 368.64 723.31 361.75 724.06 356.47
  C 724.32 354.62 726.33 353.71 727.98 354.40
  Q 735.01 357.33 740.79 364.11
  Q 743.39 367.15 747.18 367.01
  C 753.29 366.78 758.75 363.73 763.86 360.92
  Q 766.97 359.22 769.48 355.22
  Q 773.04 349.56 778.86 351.05
  C 781.53 351.74 782.75 358.18 783.09 360.35
  Q 784.28 367.93 785.28 376.90
  Q 786.06 383.82 789.98 393.74
  C 793.97 403.85 792.67 411.73 785.91 420.16
  C 782.26 424.71 777.63 428.48 776.42 434.52
  Q 775.42 439.52 773.93 442.91
  Q 766.80 459.11 748.47 465.67
  Q 743.64 467.40 739.76 471.83
  Q 735.79 476.38 731.82 480.45
  C 725.06 487.39 716.28 486.79 707.83 484.17
  Q 701.79 482.30 695.24 480.34
  Q 682.49 476.51 669.96 478.76
  Q 665.39 479.58 661.89 479.53
  Q 654.85 479.42 652.10 475.02
  Q 649.98 471.64 648.55 464.89
  Q 646.62 455.84 650.27 447.51
  Q 654.66 437.51 659.04 428.07
  Q 659.83 426.37 661.99 423.68
  C 669.14 414.78 672.25 402.59 670.77 391.45
  Q 670.28 387.76 669.81 383.98
  C 669.23 379.32 666.86 375.14 663.92 371.36
  C 659.39 365.55 655.23 357.09 657.97 349.73
  A 2.74 2.73 11.4 0 1 660.66 347.95
  C 663.65 348.09 667.16 348.84 669.44 346.24
  C 670.87 344.62 672.58 342.67 674.70 342.06
  Q 675.25 341.90 675.75 342.17
  C 679.81 344.44 681.73 350.31 683.12 354.52
  C 684.65 359.16 686.98 363.58 688.92 368.09
  Q 690.90 372.66 693.75 378.07
  C 696.15 382.60 700.79 385.46 705.18 387.25
  C 708.70 388.69 713.47 388.36 716.95 386.52
  Z"
/>
					<path
						data-name="平鎮區"
						:class="{
							'active-district':
								targetDistrict === '平鎮區' ||
								selectedIndex === 10,
							'initial-animation-8': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(10)"
						:fill-opacity="
							districtData['平鎮區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 599.48 479.03
  Q 604.13 479.17 608.75 477.50
  Q 618.34 474.03 624.03 469.88
  Q 627.55 467.31 631.29 465.03
  Q 634.95 462.81 637.80 465.64
  C 641.02 468.83 635.34 479.84 633.38 482.98
  Q 631.43 486.10 625.79 491.48
  Q 621.80 495.30 617.63 499.65
  Q 613.46 504.01 612.14 507.79
  Q 610.16 513.45 610.32 518.06
  C 610.42 521.09 610.78 524.86 611.67 527.71
  C 613.24 532.77 616.37 537.23 619.53 541.46
  Q 621.64 544.26 621.95 548.40
  Q 622.48 555.34 621.83 564.39
  Q 621.14 574.05 620.95 578.75
  Q 620.84 581.54 618.11 583.87
  C 615.14 586.40 611.49 584.71 609.79 581.64
  Q 608.02 578.46 606.97 574.66
  C 604.58 565.97 591.81 566.59 585.03 567.09
  Q 563.58 568.67 549.73 567.91
  Q 538.87 567.31 526.25 566.76
  C 519.66 566.48 513.19 565.99 506.57 565.83
  C 505.09 565.79 503.58 565.36 502.45 564.30
  Q 496.59 558.79 494.49 551.41
  Q 491.98 542.58 491.94 533.00
  Q 491.88 515.10 491.89 497.76
  Q 491.90 491.61 491.15 486.27
  Q 490.62 482.42 490.26 478.59
  Q 489.90 474.66 489.18 471.05
  Q 487.06 460.38 483.32 449.63
  Q 480.27 440.87 475.97 430.30
  Q 472.92 422.80 470.01 418.52
  Q 466.65 413.58 462.53 408.68
  Q 459.69 405.29 459.89 400.95
  Q 460.17 394.69 459.82 388.68
  C 459.68 386.09 458.50 384.02 457.81 381.60
  A 2.29 2.28 -15.5 0 1 459.41 378.78
  C 463.93 377.52 474.29 376.82 477.13 381.47
  Q 477.94 382.80 478.16 384.63
  Q 479.45 395.38 481.63 400.49
  Q 484.68 407.63 492.11 409.63
  C 496.62 410.85 503.85 408.67 508.55 407.62
  Q 515.56 406.05 524.21 407.50
  C 526.56 407.90 528.95 409.42 530.70 411.09
  Q 534.64 414.86 538.82 418.52
  C 541.41 420.79 543.21 423.39 545.22 426.19
  C 548.39 430.61 552.21 434.68 554.37 439.41
  Q 560.25 452.25 567.58 464.55
  C 571.11 470.48 576.45 472.00 582.75 473.42
  Q 588.62 474.75 593.23 477.22
  Q 596.44 478.94 599.48 479.03
  Z"
/>
					<path
						data-name="楊梅區"
						:class="{
							'active-district':
								targetDistrict === '楊梅區' ||
								selectedIndex === 5,
							'initial-animation-9': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(5)"
						:fill-opacity="
							districtData['楊梅區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 405.00 400.24
  C 408.64 402.58 412.17 404.57 416.71 403.73
  Q 419.78 403.16 422.80 402.34
  C 426.38 401.36 428.25 398.50 431.42 397.21
  Q 438.45 394.33 445.21 395.83
  Q 448.17 396.48 449.51 399.43
  Q 452.61 406.26 456.04 412.50
  C 460.97 421.44 464.43 431.17 468.71 440.58
  Q 470.42 444.32 472.65 447.78
  C 478.28 456.51 478.30 466.67 477.49 477.18
  C 476.60 488.70 478.14 500.56 480.61 511.75
  C 481.93 517.74 482.97 523.31 482.12 529.61
  Q 480.76 539.63 478.80 548.46
  C 477.22 555.62 474.42 563.95 468.89 568.81
  Q 464.25 572.90 462.22 575.88
  C 459.96 579.20 458.31 582.95 455.28 585.70
  C 451.20 589.41 446.67 592.06 441.06 591.96
  Q 422.14 591.60 404.82 583.37
  Q 398.82 580.52 392.77 577.76
  C 383.06 573.34 372.99 571.97 361.97 571.38
  Q 355.27 571.03 338.21 570.95
  Q 335.05 570.94 329.51 569.94
  Q 324.65 569.07 321.94 564.74
  Q 317.70 557.94 312.54 551.26
  C 308.64 546.20 300.26 545.71 294.19 546.07
  Q 285.18 546.61 276.47 546.90
  C 267.24 547.20 254.93 545.47 247.92 539.12
  C 242.94 534.60 238.03 529.55 231.95 526.67
  C 228.38 524.97 222.19 526.63 218.18 527.04
  C 215.07 527.36 211.33 527.11 208.67 525.24
  Q 202.28 520.78 200.49 515.00
  C 198.94 509.99 197.99 503.87 197.98 498.55
  Q 197.98 494.28 197.48 490.32
  C 196.57 483.15 197.61 476.00 196.52 468.91
  Q 195.30 460.99 197.42 452.74
  C 197.59 452.08 198.26 451.16 198.81 450.73
  C 207.11 444.16 213.54 436.25 220.57 428.49
  Q 224.13 424.57 231.69 420.23
  C 236.22 417.64 240.75 420.61 244.83 416.71
  C 249.79 411.96 256.37 406.56 263.34 405.17
  Q 266.30 404.58 269.29 403.94
  C 277.53 402.18 286.88 402.80 293.76 405.34
  Q 301.72 408.28 310.17 410.91
  C 313.99 412.10 317.31 413.79 320.92 415.29
  C 328.79 418.55 338.69 417.39 346.66 414.66
  Q 356.98 411.14 366.97 407.77
  C 372.22 406.00 377.18 403.06 382.25 401.34
  Q 389.34 398.93 400.68 398.98
  Q 403.05 398.99 405.00 400.24
  Z"
/>
					<path
						data-name="龍潭區"
						:class="{
							'active-district':
								targetDistrict === '龍潭區' ||
								selectedIndex === 4,
							'initial-animation-10': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(4)"
						:fill-opacity="
							districtData['龍潭區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 628.86 698.32
  C 627.48 701.95 625.96 705.73 625.08 709.65
  Q 623.07 718.56 620.23 725.46
  Q 616.60 734.27 607.44 739.76
  C 604.62 741.45 601.60 742.37 599.09 744.74
  Q 591.87 751.55 583.45 757.63
  C 580.33 759.89 574.59 758.98 571.50 759.44
  C 566.34 760.20 556.87 760.37 552.66 756.30
  Q 548.82 752.57 544.54 748.25
  Q 542.91 746.60 540.53 746.03
  C 537.26 745.24 536.34 747.73 534.64 749.67
  C 532.24 752.40 526.85 750.97 524.00 749.66
  C 520.79 748.17 519.77 744.55 520.02 741.40
  C 520.34 737.33 517.78 734.23 513.90 733.12
  C 507.99 731.43 501.92 729.93 496.24 727.48
  C 487.88 723.87 478.78 720.77 471.16 716.45
  Q 463.18 711.93 454.37 705.85
  C 447.60 701.18 442.08 695.77 435.96 690.49
  Q 427.18 682.92 419.02 673.98
  Q 417.60 672.42 416.59 670.36
  Q 414.37 665.83 411.88 661.58
  Q 409.20 657.03 408.31 653.23
  C 406.06 643.72 411.59 632.47 417.95 625.41
  C 420.78 622.28 421.68 618.56 420.36 614.46
  C 418.41 608.43 417.87 600.86 426.95 601.00
  Q 434.81 601.11 443.57 601.12
  C 450.33 601.13 453.63 598.61 459.75 594.24
  C 463.22 591.77 466.84 589.31 469.68 586.14
  C 475.43 579.72 480.12 572.59 483.95 564.82
  Q 484.82 563.04 486.73 562.16
  Q 487.22 561.94 487.73 562.14
  Q 490.31 563.18 491.97 565.12
  Q 500.23 574.80 512.96 575.12
  Q 532.10 575.60 547.22 578.05
  Q 558.77 579.92 567.63 579.95
  Q 579.37 579.99 591.76 579.99
  C 593.18 579.99 594.86 580.13 596.06 580.94
  Q 602.19 585.06 604.87 591.95
  Q 606.10 595.12 607.32 598.34
  Q 608.50 601.44 611.60 600.83
  Q 614.95 600.17 618.00 598.54
  C 621.84 596.49 624.81 589.16 625.92 585.42
  Q 627.99 578.44 629.96 570.51
  C 630.57 568.02 633.68 565.38 635.82 568.18
  Q 637.24 570.05 637.23 572.66
  Q 637.22 579.73 635.52 586.64
  Q 634.98 588.83 633.64 590.58
  Q 628.60 597.14 625.37 603.91
  C 622.90 609.09 623.68 613.52 627.09 617.76
  C 629.73 621.05 631.26 624.01 636.18 624.00
  Q 647.38 623.97 656.73 623.93
  Q 660.12 623.91 662.88 626.46
  Q 668.30 631.46 665.77 638.48
  C 664.33 642.48 662.21 644.66 659.28 647.36
  C 655.26 651.04 654.30 656.29 653.15 661.36
  Q 651.86 667.07 647.11 671.38
  Q 634.83 682.53 628.86 698.32
  Z"
/>
					<path
						data-name="大溪區"
						:class="{
							'active-district':
								targetDistrict === '大溪區' ||
								selectedIndex === 3,
							'initial-animation-11': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(3)"
						:fill-opacity="
							districtData['大溪區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 768.51 509.04
  C 770.15 510.02 772.02 509.96 773.79 510.71
  Q 774.98 511.22 776.02 511.92
  A 2.25 2.24 -65.7 0 1 776.94 514.36
  C 776.39 516.41 775.73 518.49 776.07 520.63
  C 777.32 528.50 782.05 536.07 789.46 539.11
  C 792.64 540.42 795.97 541.27 798.88 543.06
  Q 805.48 547.11 811.75 552.65
  Q 816.26 556.63 817.49 563.30
  Q 818.61 569.35 819.85 575.05
  Q 820.73 579.10 823.14 582.18
  C 826.29 586.22 831.91 585.70 836.07 588.05
  Q 843.19 592.07 843.07 601.62
  C 843.05 603.14 842.28 604.20 840.90 604.78
  C 838.02 606.00 835.75 608.28 835.93 611.64
  Q 836.16 615.69 837.65 618.79
  C 839.26 622.13 841.20 625.21 841.27 628.97
  C 841.40 635.92 841.67 643.06 834.45 646.94
  C 828.70 650.03 825.48 652.93 824.59 659.98
  Q 823.90 665.46 823.18 671.13
  C 822.38 677.52 819.79 683.68 817.39 689.72
  C 815.04 695.64 808.86 700.15 805.24 705.39
  Q 798.34 715.38 789.83 725.64
  Q 786.62 729.52 781.59 729.28
  Q 769.62 728.70 758.66 729.29
  Q 754.90 729.50 749.06 732.38
  C 745.14 734.31 739.66 734.51 735.90 732.51
  Q 729.41 729.05 722.19 725.74
  C 710.42 720.35 696.28 718.56 682.31 717.84
  C 675.03 717.47 666.85 718.72 661.66 724.12
  Q 659.64 726.23 657.17 728.27
  Q 652.04 732.50 646.71 737.42
  C 643.77 740.15 639.29 741.94 635.53 739.81
  C 633.77 738.81 632.51 736.85 633.31 734.81
  C 633.69 733.86 633.87 732.81 634.30 731.93
  Q 640.48 719.31 645.21 702.41
  Q 648.85 689.39 658.97 677.36
  C 660.57 675.46 661.80 673.23 662.65 670.87
  Q 665.46 662.98 670.97 656.30
  C 673.27 653.50 674.52 649.67 674.86 646.17
  Q 675.80 636.51 674.72 627.88
  C 674.09 622.75 670.54 620.11 667.39 616.56
  Q 664.48 613.28 659.67 613.96
  Q 654.15 614.74 649.17 615.55
  C 642.63 616.62 636.25 614.35 638.27 606.18
  Q 639.64 600.61 644.16 594.19
  C 650.93 584.57 650.17 572.41 646.53 561.48
  Q 645.26 557.67 641.12 552.23
  Q 632.46 540.87 624.43 532.76
  C 620.35 528.62 622.60 522.23 625.86 518.42
  Q 629.64 514.01 632.66 508.59
  C 635.55 503.42 639.38 498.82 642.67 493.86
  C 644.73 490.77 651.45 493.60 654.08 494.77
  Q 659.15 497.01 664.21 495.50
  Q 671.53 493.33 678.57 489.85
  C 687.39 485.50 697.11 489.69 704.15 495.33
  Q 707.27 497.83 713.32 499.45
  Q 716.34 500.26 719.70 499.62
  C 722.86 499.01 726.26 498.95 729.11 497.55
  Q 735.17 494.56 739.98 489.61
  Q 746.86 482.54 753.63 475.68
  C 756.20 473.08 761.47 469.57 764.57 473.70
  C 766.03 475.64 768.39 478.89 771.01 478.95
  C 779.89 479.13 784.61 466.71 793.81 472.24
  C 798.72 475.20 799.74 481.00 799.12 486.21
  Q 798.69 489.84 795.87 493.54
  C 793.28 496.94 789.25 502.17 784.84 502.02
  C 778.62 501.81 771.64 501.49 768.18 507.84
  A 0.91 0.90 30.0 0 0 768.51 509.04
  Z"
/>
					<path
						data-name="復興區"
						:class="{
							'active-district':
								targetDistrict === '復興區' ||
								selectedIndex === 11,
							'initial-animation-12': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(11)"
						:fill-opacity="
							districtData['復興區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 862.66 1166.34
  Q 860.29 1165.79 858.03 1166.00
  C 853.66 1166.40 849.93 1164.25 849.21 1159.57
  Q 847.80 1150.37 847.05 1140.79
  C 846.73 1136.75 849.50 1135.56 852.47 1133.96
  C 854.66 1132.79 854.47 1130.32 852.93 1128.75
  C 850.16 1125.93 847.88 1123.05 846.92 1119.06
  Q 845.59 1113.53 844.97 1107.61
  C 844.24 1100.67 843.76 1093.62 841.07 1087.16
  Q 839.23 1082.72 834.79 1081.39
  Q 830.81 1080.20 826.82 1079.18
  C 822.82 1078.15 819.24 1071.64 817.07 1068.25
  Q 814.26 1063.84 818.12 1060.66
  C 823.59 1056.18 820.95 1046.01 817.44 1041.38
  C 812.72 1035.12 807.88 1030.14 800.47 1027.31
  Q 787.66 1022.41 772.03 1017.66
  Q 768.67 1016.63 765.33 1016.74
  Q 753.94 1017.10 745.93 1020.25
  C 741.73 1021.91 737.46 1021.34 735.08 1016.94
  C 733.48 1013.98 734.10 1010.91 734.01 1007.65
  Q 733.96 1005.82 734.21 1003.84
  Q 735.15 996.27 736.18 988.52
  C 737.19 980.88 741.06 974.51 742.32 967.03
  Q 743.41 960.53 741.65 954.22
  Q 740.58 950.39 737.76 945.31
  Q 730.96 933.03 730.07 922.26
  C 729.45 914.70 733.58 907.76 734.06 900.17
  Q 734.24 897.36 734.95 893.91
  C 735.79 889.75 740.88 890.94 742.21 886.43
  Q 742.81 884.40 742.17 882.06
  C 740.65 876.45 738.50 872.35 734.16 868.29
  Q 726.09 860.74 719.62 853.76
  C 715.61 849.45 710.53 846.74 705.68 843.54
  C 704.49 842.76 702.83 842.03 701.34 842.48
  Q 698.10 843.47 694.64 843.19
  C 690.54 842.85 688.55 838.46 685.37 836.31
  Q 684.07 835.43 682.56 834.79
  Q 672.09 830.32 660.10 822.17
  C 654.69 818.49 650.92 813.78 646.48 809.32
  C 644.71 807.55 642.71 806.10 640.97 804.31
  C 640.13 803.45 639.20 800.94 639.22 799.76
  Q 639.32 793.74 639.02 787.72
  C 638.75 782.29 635.85 778.70 631.35 776.13
  C 627.85 774.13 624.86 771.30 623.36 767.55
  C 621.45 762.79 622.29 755.52 623.07 750.75
  Q 623.17 750.15 623.77 750.08
  Q 627.71 749.59 630.93 750.77
  C 635.29 752.37 641.15 751.86 645.50 751.02
  C 646.62 750.80 647.92 749.98 648.78 749.24
  Q 652.73 745.85 657.33 743.70
  C 659.67 742.61 662.15 741.00 663.16 738.54
  C 664.97 734.15 667.14 731.07 672.26 730.06
  Q 680.83 728.36 688.86 729.71
  Q 694.09 730.59 696.58 730.75
  C 704.06 731.24 711.34 732.15 717.88 736.07
  C 721.24 738.08 724.79 739.64 727.78 742.23
  C 731.38 745.33 735.27 745.48 739.95 744.53
  C 747.99 742.90 756.34 740.85 764.77 740.74
  Q 774.62 740.62 783.75 740.58
  Q 792.60 740.53 798.40 735.04
  Q 800.99 732.59 803.60 729.12
  C 807.69 723.65 813.74 718.17 817.17 713.95
  C 821.69 708.37 826.97 701.38 828.42 694.23
  Q 829.43 689.25 829.89 684.08
  C 830.49 677.30 832.77 673.25 838.48 669.68
  C 845.44 665.33 851.96 666.71 859.00 669.88
  Q 861.93 671.20 865.09 672.12
  Q 873.49 674.58 884.20 679.11
  C 890.51 681.78 897.03 681.02 903.86 679.88
  Q 912.80 678.39 918.18 674.35
  C 922.72 670.95 925.73 665.21 931.14 663.29
  Q 937.81 660.91 944.10 660.16
  C 947.19 659.80 950.47 660.93 953.64 661.02
  C 956.92 661.11 960.77 662.98 962.72 665.93
  C 966.61 671.81 971.05 676.80 976.35 681.76
  Q 980.51 685.66 983.79 689.95
  Q 988.59 696.23 995.11 702.45
  C 996.89 704.14 998.92 706.50 999.96 708.74
  C 1003.98 717.38 1008.35 725.89 1015.90 731.73
  Q 1022.86 737.11 1028.16 741.65
  Q 1032.39 745.27 1034.03 750.30
  C 1035.65 755.22 1034.82 760.99 1035.30 766.22
  C 1035.94 773.21 1039.63 779.92 1046.99 781.39
  C 1053.14 782.62 1058.89 785.21 1058.02 792.55
  Q 1057.17 799.61 1054.79 803.61
  Q 1048.54 814.12 1038.53 820.37
  C 1034.42 822.94 1028.94 825.44 1025.89 829.36
  Q 1019.83 837.16 1014.24 844.04
  C 1007.87 851.89 1010.59 858.78 1011.51 867.56
  Q 1012.27 874.93 1013.23 881.45
  C 1013.92 886.21 1013.86 891.08 1014.61 895.67
  C 1015.97 903.90 1019.06 912.35 1022.47 920.50
  Q 1026.53 930.16 1030.71 940.30
  Q 1032.55 944.75 1033.94 949.23
  C 1035.30 953.58 1037.11 957.06 1040.11 960.57
  Q 1047.51 969.23 1052.61 973.65
  C 1057.14 977.58 1063.34 981.73 1069.27 984.05
  C 1073.59 985.74 1077.74 987.98 1082.03 989.98
  Q 1085.29 991.50 1086.41 993.14
  Q 1089.66 997.87 1094.35 1000.37
  C 1099.52 1003.13 1102.82 1004.60 1103.83 1011.04
  C 1104.85 1017.48 1109.84 1021.02 1112.31 1026.67
  Q 1114.82 1032.45 1116.16 1038.29
  Q 1117.06 1042.20 1116.66 1047.51
  Q 1116.05 1055.65 1115.99 1062.86
  C 1115.97 1065.39 1114.32 1067.21 1112.24 1068.40
  Q 1106.90 1071.45 1105.00 1073.73
  C 1099.48 1080.37 1097.70 1089.99 1098.17 1098.68
  Q 1098.84 1110.96 1099.31 1115.56
  Q 1099.64 1118.88 1101.29 1121.78
  Q 1104.15 1126.81 1106.66 1131.59
  Q 1110.03 1138.04 1112.19 1148.73
  Q 1114.50 1160.13 1109.84 1171.49
  Q 1108.49 1174.77 1105.96 1176.90
  Q 1100.17 1181.76 1094.74 1186.87
  Q 1091.16 1190.24 1088.30 1195.56
  Q 1082.60 1206.11 1078.85 1215.14
  C 1076.37 1221.14 1073.05 1226.61 1071.34 1232.77
  C 1070.54 1235.66 1068.16 1238.51 1065.72 1240.39
  C 1057.69 1246.54 1047.88 1251.65 1037.70 1250.74
  C 1031.79 1250.21 1026.02 1248.91 1020.50 1246.81
  Q 1016.86 1245.43 1012.84 1245.17
  Q 992.57 1243.86 973.72 1250.96
  C 971.00 1251.98 968.31 1252.87 966.13 1254.74
  C 963.71 1256.81 962.06 1259.60 959.64 1261.74
  Q 954.01 1266.73 946.62 1270.65
  C 940.68 1273.81 931.28 1273.70 924.89 1272.64
  Q 920.24 1271.87 914.58 1270.63
  Q 909.23 1269.46 904.85 1267.41
  Q 894.28 1262.45 888.35 1254.00
  C 884.27 1248.18 880.44 1241.73 878.17 1234.88
  C 876.45 1229.71 874.00 1224.63 872.67 1219.30
  Q 870.68 1211.35 869.44 1202.27
  C 868.50 1195.40 869.45 1188.55 868.44 1181.72
  C 867.61 1176.07 867.25 1171.94 863.64 1166.98
  Q 863.27 1166.48 862.66 1166.34
  Z"
/>
					<path
						data-name="蘆竹區"
						:class="{
							'active-district':
								targetDistrict === '蘆竹區' ||
								selectedIndex === 12,
							'initial-animation-13': true,
						}"
						@mouseenter="toggleActive"
						@mousemove="updateMouseLocation"
						@mouseleave="toggleActiveToNull"
						@click="handleDataSelection(12)"
						:fill-opacity="
							districtData['蘆竹區'] / districtData.highest
						"
						:fill="districtColor"
						stroke="#282a2c"
						stroke-width="1"
						d="
  M 678.20 214.70
  Q 677.25 213.73 676.43 214.81
  C 674.81 216.93 673.58 219.24 673.25 221.97
  Q 671.62 235.34 672.10 243.29
  Q 672.65 252.51 674.86 262.34
  Q 676.87 271.26 677.21 279.02
  C 677.57 287.10 673.02 294.18 666.78 298.80
  Q 657.86 305.40 650.69 309.86
  Q 646.74 312.32 641.38 313.12
  Q 636.56 313.84 634.41 309.65
  C 632.09 305.16 630.30 300.56 627.57 296.24
  C 622.73 288.60 617.90 280.96 614.28 272.75
  C 611.83 267.18 608.48 262.25 605.88 256.42
  C 602.79 249.51 599.65 242.21 595.43 235.76
  Q 591.87 230.32 589.70 227.68
  C 586.98 224.38 582.99 221.77 581.87 217.06
  Q 579.73 207.97 583.37 199.53
  Q 584.40 197.14 587.26 196.77
  Q 593.87 195.91 600.15 191.02
  Q 600.65 190.63 600.76 190.01
  Q 601.80 183.77 602.19 176.10
  Q 602.43 171.19 603.75 166.93
  Q 605.28 162.02 610.85 162.05
  C 615.83 162.08 621.17 161.30 625.09 158.26
  Q 634.15 151.21 645.03 145.20
  C 654.03 140.23 661.73 132.73 659.59 121.47
  Q 658.25 114.43 656.49 107.46
  Q 654.94 101.35 650.09 93.59
  Q 645.19 85.73 639.14 76.93
  Q 635.83 72.11 633.25 66.81
  Q 626.11 52.13 619.35 39.87
  Q 613.54 29.35 612.08 19.22
  Q 611.90 17.95 612.10 16.73
  Q 612.18 16.25 612.55 15.94
  Q 615.42 13.46 618.77 11.98
  C 622.62 10.27 626.91 11.15 631.05 10.47
  Q 634.18 9.96 637.21 9.96
  Q 644.66 9.99 652.61 9.90
  C 655.40 9.86 658.09 9.03 660.82 9.27
  Q 669.12 10.02 678.15 11.45
  C 683.98 12.37 690.33 13.83 693.35 19.13
  C 694.81 21.68 696.37 24.22 698.18 26.56
  Q 700.66 29.77 701.60 33.85
  C 702.72 38.69 708.31 38.20 712.14 37.97
  C 717.36 37.67 721.78 41.35 724.46 45.56
  Q 729.57 53.57 735.13 59.46
  C 739.60 64.19 748.75 62.04 754.79 64.41
  Q 759.24 66.15 763.57 67.31
  C 769.20 68.81 775.33 68.63 780.78 70.63
  Q 789.30 73.76 795.31 79.28
  C 797.84 81.61 800.51 81.81 803.43 82.96
  Q 810.51 85.75 817.65 88.10
  C 822.11 89.56 825.94 91.81 829.34 94.89
  Q 832.56 97.80 830.35 101.27
  C 828.78 103.73 826.03 104.84 823.88 106.72
  C 818.99 110.99 814.22 115.50 808.86 119.29
  Q 805.41 121.74 802.01 124.27
  Q 795.19 129.34 787.92 134.16
  C 786.23 135.27 784.57 137.09 783.30 138.64
  Q 777.63 145.52 769.65 149.82
  Q 767.90 150.76 766.40 152.39
  Q 759.88 159.50 753.05 166.97
  A 3.16 3.16 0.0 0 1 750.82 167.99
  C 748.69 168.04 746.60 168.07 744.50 167.66
  C 738.79 166.56 730.06 166.12 724.82 169.55
  Q 721.32 171.83 717.59 174.08
  Q 714.59 175.89 714.13 179.74
  C 713.13 188.22 713.85 198.88 718.48 205.76
  C 721.21 209.82 721.13 214.65 719.57 219.19
  Q 718.81 221.39 716.37 222.37
  C 710.80 224.64 708.74 221.46 704.95 218.51
  A 2.17 2.16 43.2 0 0 702.19 218.59
  Q 698.77 221.60 695.53 223.33
  C 689.18 226.72 682.02 218.59 678.20 214.70
  Z"
/>
				</g>
			</svg>
			<Teleport to="body">
				<!-- The class "chart-tooltip" could be edited in /assets/styles/chartStyles.css -->
				<div
					v-if="targetDistrict"
					class="districtchart-chart-info chart-tooltip"
					:style="tooltipPosition"
				>
					<h6>{{ targetDistrict }}</h6>
					<span
						>{{ districtData[targetDistrict] }}
						{{ chart_config.unit }}</span
					>
				</div>
			</Teleport>
		</div>
	</div>
</template>

<style scoped lang="scss">
.districtchart {
	max-height: 100%;
	position: relative;
	overflow-y: scroll;

	&-title {
		display: flex;
		flex-direction: column;
		justify-content: center;
		position: absolute;
		left: 0;
		top: 0;
		margin: 0.5rem 0 -0.5rem;

		h5 {
			color: var(--color-complement-text);
		}

		h6 {
			color: var(--color-complement-text);
			font-size: var(--font-m);
			font-weight: 400;
		}

		&-legend {
			display: flex;
			justify-content: space-between;

			div {
				position: relative;
				width: 3rem;
				margin: 0 4px;
				border-radius: 5px;
			}

			div:before {
				content: "";
				width: 3rem;
				height: var(--font-l);
				position: absolute;
				top: 0;
				left: 0;
				background: linear-gradient(
					270deg,
					rgba(40, 42, 44, 1),
					rgba(40, 42, 44, 0.2)
				);
			}

			p {
				color: var(--color-complement-text);
			}
		}
	}

	&-chart {
		display: flex;
		justify-content: center;

		svg {
			width: 50%;

			path {
				transition: transform 0.2s;
				opacity: 0;
			}
		}

		&-info {
			position: fixed;
			z-index: 20;
		}
	}
}

.active-district {
	transform: translateY(-15px);
}

@keyframes ease-in {
	0% {
		opacity: 0;
	}

	100% {
		opacity: 1;
	}
}

@for $i from 1 through 13 {
	.initial-animation-#{$i} {
		animation-name: ease-in;
		animation-duration: 0.2s;
		animation-delay: 0.05s * ($i - 1);
		animation-timing-function: linear;
		animation-fill-mode: forwards;
	}
}
</style>
